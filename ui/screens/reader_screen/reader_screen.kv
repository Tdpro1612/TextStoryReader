#:kivy 2.0.0
# reader_screen.kv

<ReaderScreen>:
    name: 'reader_screen'
    BoxLayout:
        orientation: 'vertical'
        padding: dp(10) # Điều chỉnh padding nếu cần
        spacing: dp(5)  # Điều chỉnh spacing nếu cần

        # Label cho TIÊU ĐỀ SÁCH
        Label:
            id: book_title_label # <-- GÁN ID CHO LABEL TIÊU ĐỀ
            text: 'Loading Book Title...' # Text mặc định
            font_size: '24sp'
            bold: True
            halign: 'center'
            valign: 'middle'
            size_hint_y: None
            height: dp(60) # Chiều cao cố định cho tiêu đề

        # ScrollView chứa nội dung sách (một Label lớn)
        ScrollView:
            id: book_content_scroll_view # <-- GÁN ID CHO SCROLLVIEW
            size_hint_y: 1 # Để ScrollView chiếm hết không gian còn lại
            do_scroll_x: False # Không cho phép cuộn ngang
            bar_width: dp(10)
            bar_color: 0.5, 0.5, 0.5, 1

            Label:
                id: book_content_label # <-- GÁN ID CHO LABEL NỘI DUNG SÁCH
                text: 'Nội dung sách sẽ hiển thị ở đây' # Text mặc định
                font_size: '18sp'
                halign: 'left'
                valign: 'top'
                markup: True
                text_size: self.width, None # Quan trọng để text xuống dòng và chiếm hết chiều rộng
                size_hint_y: None # Quan trọng để Label tự điều chỉnh chiều cao theo nội dung
                height: self.texture_size[1] + dp(20) # Chiều cao của Label = chiều cao của text + padding
                color: 0.8, 0.8, 0.8, 1 # Màu chữ dễ đọc trên nền tối
                padding: dp(10), dp(10) # Padding bên trong Label

        BoxLayout: # Layout cho các nút điều hướng dưới cùng
            orientation: 'horizontal'
            size_hint_y: None
            height: dp(60)
            spacing: dp(10)

            Button:
                size_hint_y: None
                height: dp(50)
                on_release: app.root.current = 'library_screen'
                # background_normal: '' # Tắt nền mặc định của button để chỉ hiển thị icon
                # background_down: '' # Tắt nền khi nhấn
                padding: dp(5)
                Image:
                    source: 'assets/icons/back.png' # Đường dẫn đến file icon của bạn
                    pos: self.parent.pos    # Vị trí của Image = vị trí của Button cha (self.parent)
                    size: self.parent.size  # Kích thước của Image = kích thước của Button cha (self.parent)
                    allow_stretch: True     # Cho phép hình ảnh co giãn
                    keep_ratio: True        # Giữ tỷ lệ khung hình

            Button:
                size_hint_y: None
                height: dp(50)
                on_release: app.root.current = 'chapter_screen'
                # background_normal: '' # Tắt nền mặc định của button để chỉ hiển thị icon
                # background_down: '' # Tắt nền khi nhấn
                padding: dp(5)
                Image:
                    source: 'assets/icons/chapter_list.png' # Đường dẫn đến file icon của bạn
                    pos: self.parent.pos    # Vị trí của Image = vị trí của Button cha (self.parent)
                    size: self.parent.size  # Kích thước của Image = kích thước của Button cha (self.parent)
                    allow_stretch: True     # Cho phép hình ảnh co giãn
                    keep_ratio: True        # Giữ tỷ lệ khung hình

            Button:
                size_hint_y: None
                height: dp(50)
                on_release: app.root.current = 'settings_screen'
                # background_normal: '' # Tắt nền mặc định của button để chỉ hiển thị icon
                # background_down: '' # Tắt nền khi nhấn
                padding: dp(5)
                Image:
                    source: 'assets/icons/settings.png' # Đường dẫn đến file icon của bạn
                    pos: self.parent.pos    # Vị trí của Image = vị trí của Button cha (self.parent)
                    size: self.parent.size  # Kích thước của Image = kích thước của Button cha (self.parent)
                    allow_stretch: True     # Cho phép hình ảnh co giãn
                    keep_ratio: True        # Giữ tỷ lệ khung hình